<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JournÃ©e Sans Nous â€” GÃ©nÃ©rateur de mails aux syndicats</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <style>
    :root{--brand:#ee4943;--brand-600:#d33e38;--ink:#0f172a;--muted:#475569;--line:#e5e7eb;--radius:16px}
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.6 'Manrope',sans-serif;color:var(--ink);background:#fff}
    a{color:var(--brand);text-decoration:none}
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--line)}
    .wrap{max-width:1100px;margin:auto;padding:0 18px}
    .topbar{display:flex;justify-content:space-between;align-items:center;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--brand)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand-600);color:#fff}
    .btn.ghost{background:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .ticker{background:var(--brand);color:#fff;overflow:hidden;white-space:nowrap}
    .ticker .track{display:inline-block;animation:scroll 60s linear infinite;padding:6px 0}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
    .hero{background:linear-gradient(180deg,#fff 0%,#fff5f4 100%);padding:30px 0;border-bottom:1px solid var(--line)}
    h1{color:var(--brand);font-size:clamp(28px,3.2vw,42px);line-height:1.2;margin:0}
    .lede{color:var(--muted);margin:.4rem 0 0}
    main{max-width:1100px;margin:auto;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1.05fr .95fr}}
    .card{background:#fff;border:1px solid var(--line);border-radius:16px}
    .card-head{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid var(--line)}
    .card-head h2{margin:0;color:var(--brand);font-size:18px}
    .card-body{padding:14px 18px}
    label{display:block;font-weight:600;margin:.3rem 0 .25rem}
    input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;outline:none}
    input:focus,select:focus,textarea:focus{border-color:#ffcabf;box-shadow:0 0 0 3px #ffe7e2}
    textarea{min-height:220px;resize:vertical}
    .two{display:grid;gap:12px}
    @media(min-width:680px){.two{grid-template-columns:1fr 1fr}}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .note{border-left:4px solid var(--brand);background:#fff2f1;padding:.8rem;border-radius:12px}
    .preview{white-space:pre-wrap;border:1px dashed var(--line);border-radius:12px;padding:12px;background:#fff7f6}
    .muted{color:#64748b;font-size:14px}
    footer{color:#64748b;text-align:center;padding:26px 0;border-top:1px solid var(--line);margin-top:18px}
  </style>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand"><i></i><span>JournÃ©e Sans Nous</span></div>
      <div style="display:flex;gap:10px;align-items:center">
        <a class="btn ghost" href="./index.html"><i class="fa-solid fa-arrow-left"></i> Retour au guide</a>
        <a class="btn primary" target="_blank" rel="noopener" href="https://mijnschatje.github.io/journeesansnous/"><i class="fa-solid fa-house"></i> Accueil</a>
      </div>
    </div>
  </header>

  <div class="ticker"><div class="track">EN RÃ‰GION PARISIENNE : lundi 17 novembre 19hâ€“21h âžœ AssemblÃ©e publique â€“ Bourse du Travail, 29 Bd du Temple, 75011 Paris â€¢ tous les lundis 19h âžœ RÃ©union dâ€™organisation â€“ 3 rue du ChÃ¢teau dâ€™Eau â€¢ Ã€ Lâ€™Ã‰CHELLE NATIONALE : jeudi 30 octobre 19hâ€“21h âžœ RÃ©union en visio nationale des collectifs signataires de lâ€™appel</div></div>

  <section class="hero">
    <div class="wrap">
      <h1>GÃ©nÃ©rateur de mails aux syndicats</h1>
      <p class="lede">Choisis ton syndicat, ton dÃ©partement (UD) et ta fÃ©dÃ©ration (secteur), indique si tu as un mandat, puis envoie.</p>
    </div>
  </section>

  <main>
    <div class="grid">
      <!-- FORMULAIRE -->
      <div class="card">
        <div class="card-head">
          <h2>1) Choisir les destinataires</h2>
          <button class="btn" id="btnPreavis"><i class="fa-solid fa-copy"></i> Copier le modÃ¨le de prÃ©avis</button>
        </div>
        <div class="card-body">
          <div class="two">
            <div>
              <label for="syndicat">Syndicat</label>
              <select id="syndicat"></select>
            </div>
            <div>
              <label for="dept">DÃ©partement (UD)</label>
              <select id="dept"></select>
            </div>
            <div>
              <label for="fede">FÃ©dÃ©ration (secteur)</label>
              <select id="fede"></select>
            </div>
            <div>
              <label for="destinataire">Destinataire (email)</label>
              <input id="destinataire" type="email" placeholder="ex : contact@syndicat-xx.org" />
              <div class="muted">Autoâ€‘rempli : prioritÃ© FÃ©dÃ©ration âžœ UD âžœ National. Modifiable.</div>
            </div>
            <div>
              <label for="cc">Copie (CC optionnel)</label>
              <input id="cc" type="email" placeholder="ex : section.locale@â€¦" />
            </div>
            <div>
              <label for="nom">Nom / PrÃ©nom</label>
              <input id="nom" placeholder="Ton nom (ou collectif)" />
            </div>
            <div>
              <label for="lieu">Ville / Lieu de travail</label>
              <input id="lieu" placeholder="ex : Paris 20e, entrepÃ´t X, collÃ¨ge Yâ€¦" />
            </div>
          </div>

          <div style="margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
            <label style="display:flex;align-items:center;gap:8px;margin:0"><input type="checkbox" id="hasMandat"> Jâ€™ai un mandat</label>
            <input id="mandat" class="hidden" placeholder="ex : dÃ©lÃ©guÃ©Â·e syndicalÂ·e, Ã©luÂ·e CSEâ€¦" />
          </div>

          <label for="sujet" style="margin-top:10px">Objet</label>
          <input id="sujet" value="Appel Ã  la mobilisation du 18 dÃ©cembre â€“ JournÃ©e Sans Nous : pour une grÃ¨ve solidaire et politique" />
        </div>
      </div>

      <!-- MESSAGE -->
      <div class="card">
        <div class="card-head">
          <h2>2) Personnaliser le message</h2>
          <div class="actions">
            <button class="btn" id="btnRemplir"><i class="fa-solid fa-wand-magic-sparkles"></i> Charger le modÃ¨le</button>
            <button class="btn" id="btnCopier"><i class="fa-solid fa-copy"></i> Copier</button>
            <button class="btn primary" id="btnApercu"><i class="fa-solid fa-eye"></i> AperÃ§u</button>
          </div>
        </div>
        <div class="card-body">
          <label for="message">Message (modÃ¨le officiel, modifiable)</label>
          <textarea id="message"></textarea>
          <div class="note" style="margin-top:10px">
            Le texte ciâ€‘dessous est le modÃ¨le officiel. Si tu as cochÃ© Â« mandat Â», une ligne dÃ©diÃ©e sâ€™ajoutera automatiquement.
          </div>
        </div>
      </div>

      <!-- APERÃ‡U & ENVOI -->
      <div class="card">
        <div class="card-head">
          <h2>3) VÃ©rifier & envoyer</h2>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnMailto"><i class="fa-solid fa-paper-plane"></i> Ouvrir dans mon mail</button>
            <button class="btn" id="btnTelecharger"><i class="fa-solid fa-file-arrow-down"></i> TÃ©lÃ©charger en .txt</button>
          </div>
        </div>
        <div class="card-body">
          <div id="preview" class="preview" aria-live="polite">Clique sur Â« Charger le modÃ¨le Â», complÃ¨te les champs, puis vÃ©rifie ici avant envoi.</div>
        </div>
      </div>
    </div>
  </main>

  <footer><div class="wrap">Â© JournÃ©e Sans Nous â€” GÃ©nÃ©rateur de mails</div></footer>

<script>
/* ===== Mapping dÃ©partements pour affichage â€œcode â€“ nomâ€ ===== */
const DEPTS={"01":"Ain","02":"Aisne","03":"Allier","04":"Alpes-de-Haute-Provence","05":"Hautes-Alpes","06":"Alpes-Maritimes","07":"ArdÃ¨che","08":"Ardennes","09":"AriÃ¨ge","10":"Aube","11":"Aude","12":"Aveyron","13":"Bouches-du-RhÃ´ne","14":"Calvados","15":"Cantal","16":"Charente","17":"Charente-Maritime","18":"Cher","19":"CorrÃ¨ze","2A":"Corse-du-Sud","2B":"Haute-Corse","21":"CÃ´te-d'Or","22":"CÃ´tes-d'Armor","23":"Creuse","24":"Dordogne","25":"Doubs","26":"DrÃ´me","27":"Eure","28":"Eure-et-Loir","29":"FinistÃ¨re","30":"Gard","31":"Haute-Garonne","32":"Gers","33":"Gironde","34":"HÃ©rault","35":"Ille-et-Vilaine","36":"Indre","37":"Indre-et-Loire","38":"IsÃ¨re","39":"Jura","40":"Landes","41":"Loir-et-Cher","42":"Loire","43":"Haute-Loire","44":"Loire-Atlantique","45":"Loiret","46":"Lot","47":"Lot-et-Garonne","48":"LozÃ¨re","49":"Maine-et-Loire","50":"Manche","51":"Marne","52":"Haute-Marne","53":"Mayenne","54":"Meurthe-et-Moselle","55":"Meuse","56":"Morbihan","57":"Moselle","58":"NiÃ¨vre","59":"Nord","60":"Oise","61":"Orne","62":"Pas-de-Calais","63":"Puy-de-DÃ´me","64":"PyrÃ©nÃ©es-Atlantiques","65":"Hautes-PyrÃ©nÃ©es","66":"PyrÃ©nÃ©es-Orientales","67":"Bas-Rhin","68":"Haut-Rhin","69":"RhÃ´ne","70":"Haute-SaÃ´ne","71":"SaÃ´ne-et-Loire","72":"Sarthe","73":"Savoie","74":"Haute-Savoie","75":"Paris","76":"Seine-Maritime","77":"Seine-et-Marne","78":"Yvelines","79":"Deux-SÃ¨vres","80":"Somme","81":"Tarn","82":"Tarn-et-Garonne","83":"Var","84":"Vaucluse","85":"VendÃ©e","86":"Vienne","87":"Haute-Vienne","88":"Vosges","89":"Yonne","90":"Territoire de Belfort","91":"Essonne","92":"Hauts-de-Seine","93":"Seine-Saint-Denis","94":"Val-de-Marne","95":"Val-d'Oise","971":"Guadeloupe","972":"Martinique","973":"Guyane","974":"La RÃ©union","975":"Saint-Pierre-et-Miquelon","976":"Mayotte","977":"Saint-BarthÃ©lemy","978":"Saint-Martin","986":"Wallis-et-Futuna","987":"PolynÃ©sie franÃ§aise","988":"Nouvelle-CalÃ©donie"};

/* ===== Chargement de la base JSON structurÃ©e ===== */
let DB={};
async function loadDB(){
  const here=location.pathname.replace(/[^/]+$/,'');
  for(const url of [here+'data/emails-syndicats.json','/journeesansnous/data/emails-syndicats.json']){
    try{const r=await fetch(url,{cache:'no-store'});if(r.ok){DB=await r.json();break;}}catch(e){}
  }
  fillSyndicats();
}

/* ===== Remplissage des listes ===== */
const el=id=>document.getElementById(id);

function fillSyndicats(){
  const s=el('syndicat'); s.innerHTML='';
  s.add(new Option('â€” choisir â€”',''));
  const keys=Object.keys(DB).sort();
  (keys.length?keys:['CGT','CFDT','FO','CFE-CGC','CFTC','UNSA','Solidaires','FSU','CNT'])
    .forEach(k=>s.add(new Option(k,k)));
  fillStructures();
}

function udSortKey(x){
  const c=(x.code||'').toUpperCase();
  const m=c.match(/^(\d+)([A-Z]?)$/);
  if(!m) return [9999,c];
  const n=parseInt(m[1],10);
  const frac=m[2]==='A'?0.1:(m[2]==='B'?0.2:0);
  return [n+frac,c];
}

function fillStructures(){
  const synd=el('syndicat').value;
  const dept=el('dept'); const fede=el('fede');
  dept.innerHTML=''; fede.innerHTML='';
  dept.add(new Option('â€” UD (dÃ©partement) â€”',''));
  fede.add(new Option('â€” FÃ©dÃ©ration (secteur) â€”',''));

  const rec=DB[synd]||{};
  (rec.fede||[]).forEach(x=>fede.add(new Option(x.label, x.email||'')));

  (rec.ud||[]).slice().sort(udSortKey).forEach(x=>{
    const code=x.code||''; 
    const nice = (code && DEPTS[code]) ? `${code} â€“ ${DEPTS[code]}` : (x.label || code || 'UD');
    dept.add(new Option(nice, x.email||''));
  });

  updateEmail();
}

function updateEmail(){
  const fedeVal=el('fede').value||'';
  const deptVal=el('dept').value||'';
  const synd=el('syndicat').value;
  const national=(DB[synd]||{}).national||'';
  el('destinataire').value = fedeVal || deptVal || national || '';
}

/* ===== Actions ===== */
function MODELE_OFFICIEL(){
  const nom=(el('nom').value||'[PrÃ©nom Nom]').trim();
  const lieu=(el('lieu').value||'[Ville / Lieu de travail / Ã‰tablissement]').trim();
  const contact='[Contact (facultatif)]';
  return `Objet : Appel Ã  la mobilisation du 18 dÃ©cembre â€“ JournÃ©e Sans Nous : pour une grÃ¨ve solidaire et politique

Bonjour,

Je vous Ã©cris dans le cadre de la JournÃ©e Sans Nous â€“ â€œSi on sâ€™arrÃªte, tout sâ€™arrÃªte !â€, organisÃ©e le 18 dÃ©cembre 2025, Ã  lâ€™occasion de la JournÃ©e internationale des migrantÂ·eÂ·s.
 Ã€ lâ€™initiative des collectifs de personnes sans papiers, la Marche des SolidaritÃ©s appelle Ã  une grÃ¨ve gÃ©nÃ©rale solidaire Ã  lâ€™Ã©chelle nationale.
 ðŸ‘‰ Lâ€™appel complet est consultable ici : https://www.antiracisme-solidarite.org/18-d%C3%A9cembre-2025-journee-sans-nous

Je souhaite que mon lieu de travail puisse se joindre Ã  cette mobilisation historique.
 Cette journÃ©e dâ€™action me permettra de mâ€™exprimer en solidaritÃ© avec les personnes immigrÃ©es et sans papiers, qui sont mes amiÂ·es, mes voisinÂ·es et mes collÃ¨gues â€” celles et ceux qui font tourner le pays mais restent privÃ©Â·es de droits, exploitÃ©Â·es dans des conditions indignes et constamment discriminÃ©Â·es.

Aujourdâ€™hui, les politiques racistes et inhumaines menÃ©es par lâ€™Ã‰tat (rafles, enfermements en CRA, durcissement des lois sur lâ€™immigration, atteintes aux droits sociaux) ne sont pas seulement une attaque contre les personnes Ã©trangÃ¨res :
 elles fragilisent tout le socle social en remettant en cause le droit du travail, en banalisant le travail dissimulÃ© et lâ€™exploitation humaine, en organisant une mise en concurrence destructrice entre salariÃ©Â·es, et en affaiblissant la solidaritÃ© collective.
 Ces atteintes participent Ã  un glissement gÃ©nÃ©ral vers une sociÃ©tÃ© dâ€™inÃ©galitÃ©s et de peur, oÃ¹ les droits fondamentaux de chacun deviennent nÃ©gociables.

Face Ã  cette urgence, nous avons besoin que les syndicats prennent position et ouvrent la voie Ã  une grÃ¨ve politique et solidaire, comme ils lâ€™ont dÃ©jÃ  fait dans lâ€™histoire pour des causes universelles :
 contre la guerre dâ€™AlgÃ©rie, pour les droits civiques, pour la rÃ©gularisation des sans-papiers, ou pour la dÃ©fense des libertÃ©s publiques.

ðŸ‘‰ Je vous demande :

â€¢ de vous prononcer publiquement en faveur de la JournÃ©e Sans Nous,
â€¢ dâ€™informer vos adhÃ©rentÂ·es et salariÃ©Â·es sur la possibilitÃ© de se mobiliser le 18 dÃ©cembre,
â€¢ et de mettre en Å“uvre les moyens lÃ©gaux pour permettre une grÃ¨ve solidaire (prÃ©avis, communication, appui logistiqueâ€¦).

Cette journÃ©e sera lâ€™occasion de manifester, dÃ©battre, fermer symboliquement nos lieux de travail, dâ€™enseignement ou dâ€™activitÃ©, pour rappeler que la solidaritÃ© nâ€™a pas de papiers et que la sociÃ©tÃ© ne fonctionne que grÃ¢ce Ã  celles et ceux quâ€™on invisibilise.

https://www.antiracisme-solidarite.org/18-d%C3%A9cembre-2025-journee-sans-nous

Merci pour votre Ã©coute et pour lâ€™engagement que vous prendrez.
 Je reste Ã  votre disposition pour toute information complÃ©mentaire ou pour participer Ã  lâ€™organisation locale.

Solidairement,

${nom}
 ${lieu}
 ${contact}
`;}

const MODELE_PREAVIS="Pour la JournÃ©e Sans Nous Ã  lâ€™occasion de la JournÃ©e internationale des Migrant.e.s 2025, nous appelons Ã  une journÃ©e de grÃ¨ve pour exiger [revendication professionnelle claire, ex : rÃ©gularisation par le travail / fin des contrÃ´les discriminatoires / protection juridique pour travailleursÂ·ses migrantÂ·es] et pour dÃ©noncer le racisme dâ€™Ã‰tat qui nie ces droits.";

function chargerModele(){el('message').value=MODELE_OFFICIEL(); apercu();}
function apercu(){el('preview').textContent=el('message').value||'Aucun message saisi.';}
function copier(){navigator.clipboard.writeText(el('message').value).then(()=>alert('Message copiÃ© dans le presse-papiers.'));}

function toMailto(){
  const to=el('destinataire').value||'';
  const cc=el('cc').value||'';
  const sujet=el('sujet').value||'Appel Ã  la mobilisation du 18 dÃ©cembre â€“ JournÃ©e Sans Nous : pour une grÃ¨ve solidaire et politique';
  const body=el('message').value||MODELE_OFFICIEL();
  const enc=s=>encodeURIComponent(s).replace(/%0A/g,'%0D%0A');
  const url=`mailto:${encodeURIComponent(to)}?subject=${enc(sujet)}&body=${enc(body)}${cc?`&cc=${encodeURIComponent(cc)}`:''}`;
  window.location.href=url;
}
function telecharger(){
  const blob=new Blob([el('message').value||MODELE_OFFICIEL()],{type:'text/plain'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='mail-pour-syndicat.txt'; a.click(); URL.revokeObjectURL(a.href);
}

/* Listeners + init */
document.addEventListener('DOMContentLoaded',()=>{ 
  document.getElementById('btnRemplir').addEventListener('click',chargerModele);
  document.getElementById('btnApercu').addEventListener('click',apercu);
  document.getElementById('btnCopier').addEventListener('click',copier);
  document.getElementById('btnMailto').addEventListener('click',toMailto);
  document.getElementById('btnTelecharger').addEventListener('click',telecharger);
  document.getElementById('btnPreavis').addEventListener('click',()=>{navigator.clipboard.writeText(MODELE_PREAVIS).then(()=>alert('ModÃ¨le de prÃ©avis copiÃ©.'))});
  document.getElementById('syndicat').addEventListener('change',fillStructures);
  document.getElementById('dept').addEventListener('change',updateEmail);
  document.getElementById('fede').addEventListener('change',updateEmail);
  loadDB(); chargerModele();
});
</script>

</body>
</html>
