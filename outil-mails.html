<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Journ√©e Sans Nous ‚Äî G√©n√©rateur de mails aux syndicats</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <style>
    :root{--brand:#ee4943;--brand-600:#d33e38;--ink:#0f172a;--muted:#475569;--line:#e5e7eb;--radius:16px}
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.6 'Manrope',sans-serif;color:var(--ink);background:#fff}
    a{color:var(--brand);text-decoration:none}

    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--line)}
    .wrap{max-width:1100px;margin:auto;padding:0 18px}
    .topbar{display:flex;justify-content:space-between;align-items:center;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--brand)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand-600);color:#fff}
    .btn.ghost{background:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}

    .ticker{background:var(--brand);color:#fff;overflow:hidden;white-space:nowrap}
    .ticker .track{display:inline-block;animation:scroll 60s linear infinite;padding:6px 0}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    .hero{background:linear-gradient(180deg,#fff 0%,#fff5f4 100%);padding:30px 0;border-bottom:1px solid var(--line)}
    h1{color:var(--brand);font-size:clamp(28px,3.2vw,42px);line-height:1.2;margin:0}
    .lede{color:var(--muted);margin:.4rem 0 0}

    main{max-width:1100px;margin:auto;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1.05fr .95fr}}

    .card{background:#fff;border:1px solid var(--line);border-radius:16px}
    .card-head{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid var(--line)}
    .card-head h2{margin:0;color:var(--brand);font-size:18px}
    .card-body{padding:14px 18px}

    label{display:block;font-weight:600;margin:.3rem 0 .25rem}
    input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;outline:none}
    input:focus,select:focus,textarea:focus{border-color:#ffcabf;box-shadow:0 0 0 3px #ffe7e2}
    textarea{min-height:220px;resize:vertical}

    .two{display:grid;gap:12px}
    @media(min-width:680px){.two{grid-template-columns:1fr 1fr}}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .note{border-left:4px solid var(--brand);background:#fff2f1;padding:.8rem;border-radius:12px}

    .preview{white-space:pre-wrap;border:1px dashed var(--line);border-radius:12px;padding:12px;background:#fff7f6}

    .muted{color:#64748b;font-size:14px}

    footer{color:#64748b;text-align:center;padding:26px 0;border-top:1px solid var(--line);margin-top:18px}
  </style>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand"><i></i><span>Journ√©e Sans Nous</span></div>
      <div style="display:flex;gap:10px;align-items:center">
        <a class="btn ghost" href="./index.html"><i class="fa-solid fa-arrow-left"></i> Retour au guide</a>
        <a class="btn primary" target="_blank" rel="noopener" href="https://mijnschatje.github.io/journeesansnous/"><i class="fa-solid fa-house"></i> Accueil</a>
      </div>
    </div>
  </header>

  <div class="ticker"><div class="track">EN R√âGION PARISIENNE : lundi 17 novembre 19h‚Äì21h ‚ûú Assembl√©e publique ‚Äì Bourse du Travail, 29 Bd du Temple, 75011 Paris ‚Ä¢ tous les lundis 19h ‚ûú R√©union d‚Äôorganisation ‚Äì 3 rue du Ch√¢teau d‚ÄôEau ‚Ä¢ √Ä L‚Äô√âCHELLE NATIONALE : jeudi 30 octobre 19h‚Äì21h ‚ûú R√©union en visio nationale des collectifs signataires de l‚Äôappel</div></div>

  <section class="hero">
    <div class="wrap">
      <h1>G√©n√©rateur de mails aux syndicats</h1>
      <p class="lede">M√™me design que le guide. Choisis ton syndicat et ta section locale dans la base, personnalise, puis envoie.</p>
    </div>
  </section>

  <main>
    <div class="grid">
      <!-- FORMULAIRE -->
      <div class="card">
        <div class="card-head">
          <h2>1) Choisir les destinataires</h2>
          <button class="btn" id="btnPreavis"><i class="fa-solid fa-copy"></i> Copier le mod√®le de pr√©avis</button>
        </div>
        <div class="card-body">
          <div class="two">
            <div>
              <label for="syndicat">Syndicat</label>
              <select id="syndicat"></select>
            </div>
            <div>
              <label for="structure">Section / Territoire</label>
              <select id="structure"></select>
            </div>
            <div>
              <label for="destinataire">Destinataire (email)</label>
              <input id="destinataire" type="email" placeholder="ex : contact@syndicat-xx.org" />
              <div class="muted">Pr√©-rempli si trouv√© dans la base. Modifiable.</div>
            </div>
            <div>
              <label for="cc">Copie (CC optionnel)</label>
              <input id="cc" type="email" placeholder="ex : section.locale@‚Ä¶" />
            </div>
            <div>
              <label for="nom">Nom / Pr√©nom</label>
              <input id="nom" placeholder="Ton nom (ou collectif)" />
            </div>
            <div>
              <label for="lieu">Ville / Lieu de travail</label>
              <input id="lieu" placeholder="ex : Paris 20e, entrep√¥t X, coll√®ge Y‚Ä¶" />
            </div>
          </div>

          <label for="sujet" style="margin-top:10px">Objet</label>
          <input id="sujet" value="Appel √† la mobilisation du 18 d√©cembre ‚Äì Journ√©e Sans Nous : pour une gr√®ve solidaire et politique" />
        </div>
      </div>

      <!-- MESSAGE -->
      <div class="card">
        <div class="card-head">
          <h2>2) Personnaliser le message</h2>
          <div class="actions">
            <button class="btn" id="btnRemplir"><i class="fa-solid fa-wand-magic-sparkles"></i> Charger le mod√®le</button>
            <button class="btn" id="btnCopier"><i class="fa-solid fa-copy"></i> Copier</button>
            <button class="btn primary" id="btnApercu"><i class="fa-solid fa-eye"></i> Aper√ßu</button>
          </div>
        </div>
        <div class="card-body">
          <label for="message">Message (mod√®le officiel, modifiable)</label>
          <textarea id="message"></textarea>
          <div class="note" style="margin-top:10px">
            Ce mod√®le est celui fourni par la campagne. Tu peux l‚Äôadapter (ajouter des infos locales, etc.).
          </div>
        </div>
      </div>

      <!-- APER√áU & ENVOI -->
      <div class="card">
        <div class="card-head">
          <h2>3) V√©rifier & envoyer</h2>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnMailto"><i class="fa-solid fa-paper-plane"></i> Ouvrir dans mon mail</button>
            <button class="btn" id="btnTelecharger"><i class="fa-solid fa-file-arrow-down"></i> T√©l√©charger en .txt</button>
          </div>
        </div>
        <div class="card-body">
          <div id="preview" class="preview" aria-live="polite">Clique sur ¬´¬†Charger le mod√®le¬†¬ª, compl√®te les champs, puis v√©rifie ici avant envoi.</div>
        </div>
      </div>

      <!-- BASE D'EMAILS -->
      <div class="card">
        <div class="card-head">
          <h2>Base d‚Äôemails (optionnelle)</h2>
          <div class="actions">
            <button class="btn" id="btnReload"><i class="fa-solid fa-rotate"></i> Recharger</button>
          </div>
        </div>
        <div class="card-body">
          <p class="muted">Ce g√©n√©rateur peut charger une base JSON locale `./data/emails-syndicats.json`. S‚Äôil n‚Äôy en a pas, tu peux saisir l‚Äôemail √† la main.</p>
          <pre class="preview" style="font-size:12px">Format attendu :
{
  "CGT": {
    "national": "contact@cgt.fr",
    "sections": [
      {"label": "CGT Paris (75)", "email": "paris@cgt.fr"},
      {"label": "CGT Seine-Saint-Denis (93)", "email": "ud93@cgt.fr"}
    ]
  },
  "Solidaires": { "national": "contact@solidaires.org", "sections": [ ... ] }
}
          </pre>
        </div>
      </div>
    </div>
  </main>

  <footer><div class="wrap">¬© Journ√©e Sans Nous ‚Äî G√©n√©rateur de mails</div></footer>

  <script>
    const el = id => document.getElementById(id);

    // --- Mod√®le officiel du mail (issu de la campagne) ---
    const MODELE_OFFICIEL = () => {
      const nom  = (el('nom').value || '[Pr√©nom Nom]').trim();
      const lieu = (el('lieu').value || '[Ville / Lieu de travail / √âtablissement]').trim();
      const contact = '[Contact (facultatif)]';
      return (
`Objet : Appel √† la mobilisation du 18 d√©cembre ‚Äì Journ√©e Sans Nous : pour une gr√®ve solidaire et politique

Bonjour,

Je vous √©cris dans le cadre de la Journ√©e Sans Nous ‚Äì ‚ÄúSi on s‚Äôarr√™te, tout s‚Äôarr√™te !‚Äù, organis√©e le 18 d√©cembre 2025, √† l‚Äôoccasion de la Journ√©e internationale des migrant¬∑e¬∑s.
 √Ä l‚Äôinitiative des collectifs de personnes sans papiers, la Marche des Solidarit√©s appelle √† une gr√®ve g√©n√©rale solidaire √† l‚Äô√©chelle nationale.
 üëâ L‚Äôappel complet est consultable ici : https://www.antiracisme-solidarite.org/18-d%C3%A9cembre-2025-journee-sans-nous

Je souhaite que mon lieu de travail puisse se joindre √† cette mobilisation historique.
 Cette journ√©e d‚Äôaction me permettra de m‚Äôexprimer en solidarit√© avec les personnes immigr√©es et sans papiers, qui sont mes ami¬∑es, mes voisin¬∑es et mes coll√®gues ‚Äî celles et ceux qui font tourner le pays mais restent priv√©¬∑es de droits, exploit√©¬∑es dans des conditions indignes et constamment discrimin√©¬∑es.

Aujourd‚Äôhui, les politiques racistes et inhumaines men√©es par l‚Äô√âtat (rafles, enfermements en CRA, durcissement des lois sur l‚Äôimmigration, atteintes aux droits sociaux) ne sont pas seulement une attaque contre les personnes √©trang√®res :
 elles fragilisent tout le socle social en remettant en cause le droit du travail, en banalisant le travail dissimul√© et l‚Äôexploitation humaine, en organisant une mise en concurrence destructrice entre salari√©¬∑es, et en affaiblissant la solidarit√© collective.
 Ces atteintes participent √† un glissement g√©n√©ral vers une soci√©t√© d‚Äôin√©galit√©s et de peur, o√π les droits fondamentaux de chacun deviennent n√©gociables.

Face √† cette urgence, nous avons besoin que les syndicats prennent position et ouvrent la voie √† une gr√®ve politique et solidaire, comme ils l‚Äôont d√©j√† fait dans l‚Äôhistoire pour des causes universelles :
 contre la guerre d‚ÄôAlg√©rie, pour les droits civiques, pour la r√©gularisation des sans-papiers, ou pour la d√©fense des libert√©s publiques.

üëâ Je vous demande :

‚Ä¢ de vous prononcer publiquement en faveur de la Journ√©e Sans Nous,
‚Ä¢ d‚Äôinformer vos adh√©rent¬∑es et salari√©¬∑es sur la possibilit√© de se mobiliser le 18 d√©cembre,
‚Ä¢ et de mettre en ≈ìuvre les moyens l√©gaux pour permettre une gr√®ve solidaire (pr√©avis, communication, appui logistique‚Ä¶).

Cette journ√©e sera l‚Äôoccasion de manifester, d√©battre, fermer symboliquement nos lieux de travail, d‚Äôenseignement ou d‚Äôactivit√©, pour rappeler que la solidarit√© n‚Äôa pas de papiers et que la soci√©t√© ne fonctionne que gr√¢ce √† celles et ceux qu‚Äôon invisibilise.

https://www.antiracisme-solidarite.org/18-d%C3%A9cembre-2025-journee-sans-nous

Merci pour votre √©coute et pour l‚Äôengagement que vous prendrez.
 Je reste √† votre disposition pour toute information compl√©mentaire ou pour participer √† l‚Äôorganisation locale.

Solidairement,

${nom}
 ${lieu}
 ${contact}
`)};

    const MODELE_PREAVIS = "Pour la Journ√©e Sans Nous √† l‚Äôoccasion de la Journ√©e internationale des Migrant.e.s 2025, nous appelons √† une journ√©e de gr√®ve pour exiger [revendication professionnelle claire, ex : r√©gularisation par le travail / fin des contr√¥les discriminatoires / protection juridique pour travailleurs¬∑ses migrant¬∑es] et pour d√©noncer le racisme d‚Äô√âtat qui nie ces droits.";

    // --- Remplissage du mod√®le officiel ---
    function chargerModele(){ el('message').value = MODELE_OFFICIEL(); apercu(); }
    function apercu(){ el('preview').textContent = el('message').value || 'Aucun message saisi.'; }
    function copier(){ navigator.clipboard.writeText(el('message').value).then(()=>alert('Message copi√© dans le presse‚Äëpapiers.')); }

    // --- Mailto & t√©l√©chargement ---
    function toMailto(){
      const to = el('destinataire').value || '';
      const cc = el('cc').value || '';
      const sujet = el('sujet').value || 'Appel √† la mobilisation du 18 d√©cembre ‚Äì Journ√©e Sans Nous : pour une gr√®ve solidaire et politique';
      const body = el('message').value || MODELE_OFFICIEL();
      const enc = s => encodeURIComponent(s).replace(/%0A/g,'%0D%0A');
      const url = `mailto:${encodeURIComponent(to)}?subject=${enc(sujet)}&body=${enc(body)}${cc?`&cc=${encodeURIComponent(cc)}`:''}`;
      window.location.href = url;
    }
    function telecharger(){
      const blob = new Blob([el('message').value || MODELE_OFFICIEL()], {type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'mail-pour-syndicat.txt';
      a.click();
      URL.revokeObjectURL(a.href);
    }

    // --- Base d'emails (JSON optionnel) ---
    let DB = {};
    async function loadDB(){
      try{
        const res = await fetch('./data/emails-syndicats.json',{cache:'no-store'});
        if(!res.ok) throw new Error('no db');
        DB = await res.json();
      }catch(e){ DB = {}; }
      fillSyndicats();
    }

    function fillSyndicats(){
      const s = el('syndicat'); s.innerHTML = '';
      const opt0 = document.createElement('option'); opt0.value=''; opt0.textContent='‚Äî choisir ‚Äî'; s.appendChild(opt0);
      const keys = Object.keys(DB).sort();
      if(keys.length===0){
        ['CGT','Solidaires','FSU','CFDT','UNSA','CNT','FO'].forEach(k=>{
          const o=document.createElement('option');o.textContent=k;o.value=k;s.appendChild(o);
        });
      }else{
        keys.forEach(k=>{const o=document.createElement('option');o.textContent=k;o.value=k;s.appendChild(o);});
      }
      fillStructures();
    }

    function fillStructures(){
      const synd = el('syndicat').value;
      const t = el('structure'); t.innerHTML='';
      const opt0 = document.createElement('option'); opt0.value=''; opt0.textContent='‚Äî section / territoire ‚Äî'; t.appendChild(opt0);
      if(DB[synd] && Array.isArray(DB[synd].sections)){
        DB[synd].sections.forEach(rec=>{
          const o=document.createElement('option'); o.value=rec.email||''; o.textContent=rec.label||rec.email; t.appendChild(o);
        });
        if(DB[synd].national){
          const o=document.createElement('option'); o.value=DB[synd].national; o.textContent=`${synd} ‚Äî National (${DB[synd].national})`;
          t.insertBefore(o, t.children[1]);
        }
      }
      el('destinataire').value='';
    }

    // Quand on choisit une structure, on pr√©-remplit l'email
    el('structure').addEventListener('change',()=>{
      const v = el('structure').value; if(v) el('destinataire').value = v;
    });
    el('syndicat').addEventListener('change', fillStructures);

    // Boutons
    el('btnRemplir').addEventListener('click', chargerModele);
    el('btnApercu').addEventListener('click', apercu);
    el('btnCopier').addEventListener('click', copier);
    el('btnMailto').addEventListener('click', toMailto);
    el('btnTelecharger').addEventListener('click', telecharger);
    el('btnPreavis').addEventListener('click', ()=>{navigator.clipboard.writeText(MODELE_PREAVIS).then(()=>alert('Mod√®le de pr√©avis copi√©.'))});
    el('btnReload').addEventListener('click', loadDB);

    // Init
    document.addEventListener('DOMContentLoaded', ()=>{ loadDB(); chargerModele(); });
  </script>
</body>
</html>
