<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Journée Sans Nous — Générateur de mails aux syndicats</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <style>
    :root{--brand:#ee4943;--brand-600:#d33e38;--ink:#0f172a;--muted:#475569;--line:#e5e7eb;--radius:16px}
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.6 'Manrope',sans-serif;color:var(--ink);background:#fff}
    a{color:var(--brand);text-decoration:none}

    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--line)}
    .wrap{max-width:1100px;margin:auto;padding:0 18px}
    .topbar{display:flex;justify-content:space-between;align-items:center;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--brand)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand-600);color:#fff}
    .btn.ghost{background:#fff}

    .ticker{background:var(--brand);color:#fff;overflow:hidden;white-space:nowrap}
    .ticker .track{display:inline-block;animation:scroll 60s linear infinite;padding:6px 0}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    .hero{background:linear-gradient(180deg,#fff 0%,#fff5f4 100%);padding:30px 0;border-bottom:1px solid var(--line)}
    h1{color:var(--brand);font-size:clamp(28px,3.2vw,42px);line-height:1.2;margin:0}
    .lede{color:var(--muted);margin:.4rem 0 0}

    main{max-width:1100px;margin:auto;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1.05fr .95fr}}

    .card{background:#fff;border:1px solid var(--line);border-radius:16px}
    .card-head{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid var(--line)}
    .card-head h2{margin:0;color:var(--brand);font-size:18px}
    .card-body{padding:14px 18px}

    label{display:block;font-weight:600;margin:.3rem 0 .25rem}
    input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;outline:none}
    input:focus,select:focus,textarea:focus{border-color:#ffcabf;box-shadow:0 0 0 3px #ffe7e2}
    textarea{min-height:160px;resize:vertical}

    .two{display:grid;gap:12px}
    @media(min-width:680px){.two{grid-template-columns:1fr 1fr}}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .note{border-left:4px solid var(--brand);background:#fff2f1;padding:.8rem;border-radius:12px}

    .preview{white-space:pre-wrap;border:1px dashed var(--line);border-radius:12px;padding:12px;background:#fff7f6}

    footer{color:#64748b;text-align:center;padding:26px 0;border-top:1px solid var(--line);margin-top:18px}
  </style>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand"><i></i><span>Journée Sans Nous</span></div>
      <div style="display:flex;gap:10px;align-items:center">
        <a class="btn ghost" href="./index.html"><i class="fa-solid fa-arrow-left"></i> Retour au guide</a>
        <a class="btn primary" target="_blank" rel="noopener" href="https://mijnschatje.github.io/journeesansnous/"><i class="fa-solid fa-house"></i> Accueil</a>
      </div>
    </div>
  </header>

  <div class="ticker"><div class="track">EN RÉGION PARISIENNE : lundi 17 novembre 19h–21h ➜ Assemblée publique – Bourse du Travail, 29 Bd du Temple, 75011 Paris • tous les lundis 19h ➜ Réunion d’organisation – 3 rue du Château d’Eau • À L’ÉCHELLE NATIONALE : jeudi 30 octobre 19h–21h ➜ Réunion en visio nationale des collectifs signataires de l’appel</div></div>

  <section class="hero">
    <div class="wrap">
      <h1>Générer mon mail aux syndicats</h1>
      <p class="lede">Même design que le guide. En 2 minutes, interpelle ton syndicat pour couvrir la grève du 18 décembre et sécuriser tout le monde.</p>
    </div>
  </section>

  <main>
    <div class="grid">
      <div class="card">
        <div class="card-head">
          <h2>1) Renseigner les infos</h2>
          <button class="btn" id="btnPreavis"><i class="fa-solid fa-copy"></i> Copier le modèle de préavis</button>
        </div>
        <div class="card-body">
          <div class="two">
            <div>
              <label for="syndicat">Syndicat</label>
              <select id="syndicat">
                <option value="">— choisir —</option>
                <option>CGT</option>
                <option>Solidaires</option>
                <option>FSU</option>
                <option>CFDT</option>
                <option>UNSA</option>
                <option>CNT</option>
                <option>FO</option>
              </select>
            </div>
            <div>
              <label for="branche">Secteur / Branche</label>
              <input id="branche" placeholder="ex : nettoyage, restauration, éducation…" />
            </div>
            <div>
              <label for="destinataire">Destinataire (email)</label>
              <input id="destinataire" type="email" placeholder="ex : contact@syndicat-xx.org" />
            </div>
            <div>
              <label for="cc">Copie (CC optionnel)</label>
              <input id="cc" type="email" placeholder="ex : section.locale@…" />
            </div>
            <div>
              <label for="nom">Nom / Prénom</label>
              <input id="nom" placeholder="Ton nom (ou collectif)" />
            </div>
            <div>
              <label for="lieu">Ville / Site</label>
              <input id="lieu" placeholder="ex : Paris 20e, entrepôt X, collège Y…" />
            </div>
          </div>

          <label for="sujet" style="margin-top:10px">Objet</label>
          <input id="sujet" value="Préavis et appel à la grève du 18 décembre – Journée Sans Nous" />

          <label for="message" style="margin-top:10px">Message (pré‑rempli, modifiable)</label>
          <textarea id="message"></textarea>

          <div class="note" style="margin-top:10px">
            Astuce : tu peux ajouter le <strong>modèle de préavis</strong> à ton message. Le syndicat peut ensuite déposer le préavis qui couvrira toutes et tous, y compris les collègues sans papiers.
          </div>

          <div class="actions">
            <button class="btn" id="btnRemplir"><i class="fa-solid fa-wand-magic-sparkles"></i> Remplir un message type</button>
            <button class="btn" id="btnCopier"><i class="fa-solid fa-copy"></i> Copier le message</button>
            <button class="btn primary" id="btnApercu"><i class="fa-solid fa-eye"></i> Aperçu</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>2) Vérifier & envoyer</h2>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnMailto"><i class="fa-solid fa-paper-plane"></i> Ouvrir dans mon mail</button>
            <button class="btn" id="btnTelecharger"><i class="fa-solid fa-file-arrow-down"></i> Télécharger en .txt</button>
          </div>
        </div>
        <div class="card-body">
          <div id="preview" class="preview" aria-live="polite">Remplis le formulaire de gauche puis clique « Aperçu ».</div>
        </div>
      </div>
    </div>
  </main>

  <footer><div class="wrap">© Journée Sans Nous — Générateur de mails</div></footer>

  <script>
    const el = id => document.getElementById(id);
    const MODELE_PREAVIS = "Pour la Journée Sans Nous à l’occasion de la Journée internationale des Migrant.e.s 2025, nous appelons à une journée de grève pour exiger [revendication professionnelle claire, ex : régularisation par le travail / fin des contrôles discriminatoires / protection juridique pour travailleurs·ses migrant·es] et pour dénoncer le racisme d’État qui nie ces droits.";

    const MESSAGE_TYPE = () => {
      const nom = el('nom').value || '—';
      const syndicat = el('syndicat').value || '—';
      const branche = el('branche').value || '—';
      const lieu = el('lieu').value || '—';
      return (
`Bonjour,

Je vous écris en tant que ${nom} (${branche}, ${lieu}). Dans le cadre de la Journée internationale des migrant·e·s (18 décembre) et de la mobilisation « Journée Sans Nous », nous souhaitons que ${syndicat} dépose un préavis couvrant les salarié·es (y compris sans papiers) et appelle à la grève solidaire et politique ce jour‑là.

Pourquoi ? ➜ La régularisation et l’égalité des droits protègent tout le monde : fin de la concurrence déloyale, alignement des salaires, amélioration des conditions de travail. La grève permet d’exprimer collectivement ces exigences et de sécuriser les plus exposé·es.

Nos revendications locales :
• … (ex : régularisation par le travail de collègues identifiés, fin des contrôles discriminatoires, amélioration des plannings…)

Vous trouverez ci‑dessous un modèle de formulation d’appel/préavis :
—
${MODELE_PREAVIS}
—

Pouvez‑vous nous confirmer rapidement la procédure (préavis, communication, relais sections locales) ?

Solidairement,
${nom}
`)}

    function remplirType(){ el('message').value = MESSAGE_TYPE(); }
    function apercu(){ el('preview').textContent = el('message').value || 'Aucun message saisi.'; }
    function copier(){ navigator.clipboard.writeText(el('message').value).then(()=>alert('Message copié dans le presse‑papiers.')); }
    function toMailto(){
      const to = el('destinataire').value || '';
      const cc = el('cc').value || '';
      const sujet = el('sujet').value || 'Préavis et appel – Journée Sans Nous';
      const body = el('message').value || MESSAGE_TYPE();
      const enc = s => encodeURIComponent(s).replace(/%0A/g,'%0D%0A');
      const url = `mailto:${encodeURIComponent(to)}?subject=${enc(sujet)}&body=${enc(body)}${cc?`&cc=${encodeURIComponent(cc)}`:''}`;
      window.location.href = url;
    }
    function telecharger(){
      const blob = new Blob([el('message').value || MESSAGE_TYPE()], {type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'mail-pour-syndicat.txt';
      a.click();
      URL.revokeObjectURL(a.href);
    }
    el('btnRemplir').addEventListener('click', remplirType);
    el('btnApercu').addEventListener('click', apercu);
    el('btnCopier').addEventListener('click', copier);
    el('btnMailto').addEventListener('click', toMailto);
    el('btnTelecharger').addEventListener('click', telecharger);
    el('btnPreavis').addEventListener('click', ()=>{navigator.clipboard.writeText(MODELE_PREAVIS).then(()=>alert('Modèle de préavis copié.'))});
    document.addEventListener('DOMContentLoaded', ()=>{remplirType();apercu();});
  </script>
</body>
</html>
